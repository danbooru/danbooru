<div class="file-upload-component relative card w-md max-w-full" data-drop-target="<%= j drop_target %>" data-max-file-size="<%= j max_file_size %>" data-max-files-per-upload="<%= j max_files_per_upload %>">
  <%= simple_form_for(Upload.new, url: uploads_path(format: :json), html: { class: "flex flex-col !m-0", autocomplete: "off" }, remote: true) do |f| %>
    <%= f.input :files, as: :file, wrapper_html: { class: "hidden" }, input_html: { "multiple": max_files_per_upload > 1 }  %>

    <div class="rounded-t-lg p-4 pb-8 max-h-360px thin-scrollbar source">
      <label id="source-label" class="w-full text-center mb-1 block !font-normal">Paste URL here</label>
      <%= f.input :source, label: false, as: :string, placeholder: "Paste a pixiv link, Tweet, etc", input_html: { value: url, class: "text-center bg:card" }, wrapper_html: { class: "px-4 text-center !m-0" } %>
      <span class="hint text-muted text-xs text-center w-full block mt-1">
        <%= link_to_wiki "See here", "help:bookmarklet_notice" %> for a list of supported sites.
      </span>
      <%= f.input :referer_url, as: :hidden, input_html: { value: referer_url } %>
      <%= f.submit "Upload", class: "button-primary text-center mx-auto hidden", "data-disable-with": false %>
    </div>


    <div class="dropzone-container relative input text-center rounded-t-lg cursor-pointer p-4 pt-2 max-h-360px thin-scrollbar !m-0">
      <p class="text-center mb-2">&mdash; or &mdash;</p>

      <div class="dropzone-hint">
        <div>Choose file or drag image here</div>
        <div class="hint fineprint !p-0">Max size: <%= number_to_human_size(Danbooru.config.max_file_size) %>.</div>
      </div>
    </div>
  <% end %>

  <%= spinner_icon(class: "hidden absolute inset-0 m-auto h-12 link-color") %>

  <template class="dropzone-preview-template">
    <div class="dz-preview dz-file-preview flex flex-col text-center">
      <div class="dz-details text-xxs">
        <span class="dz-filename break-all" data-dz-name></span>,
        <span class="dz-size" data-dz-size></span>
      </div>

      <div class="dz-progress absolute bottom-0 left-0 w-full h-1">
        <div class="dz-upload h-1" data-dz-uploadprogress></div>
      </div>

      <div class="hidden dz-error-message block" data-dz-errormessage></div>
    </div>
  </template>
</div>
