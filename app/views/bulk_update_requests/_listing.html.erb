<table class="striped" width="100%">
  <thead>
    <tr>
      <th width="50%">Script</th>
      <th width="10%">Reference</th>
      <th width="10%">Creator</th>
      <th width="10%">Appprover</th>
      <th width="5%">Status</th>
      <th width="15%"></th>
    </tr>
  </thead>
  <tbody>
    <% bulk_update_requests.each do |request| %>
      <tr id="request-<%= request.id %>">
        <td><%= script_with_line_breaks(request.script) %></td>
        <td>
          <% if request.forum_topic_id %>
            <% if request.forum_post_id && request.forum_topic.posts.first.id != request.forum_post_id %>
              <%= link_to("#{request.forum_topic_id}.#{request.forum_post_id}", forum_topic_path(request.forum_topic_id, :page => request.forum_post.forum_topic_page, :anchor => "forum_post_#{request.forum_post_id}")) %>
            <% else %>
              <%= link_to(request.forum_topic_id, forum_topic_path(request.forum_topic_id)) %>
            <% end %>
          <% end %>
        </td>
        <td><%= link_to_user(request.user) %></td>
        <td><% if request.approver %><%= link_to_user(request.approver) %><% end %></td>
        <td id="request-status-for-<%= request.id %>"><%= request.status %></td>
        <td>
          <%= link_to "Show", bulk_update_request_path(request) %>
          <% if request.editable?(CurrentUser.user) %>
            | <%= link_to "Edit", edit_bulk_update_request_path(request) %>
            | <%= link_to "Reject", bulk_update_request_path(request), :method => :delete, :remote => true, :data => {:confirm => "Are you sure you want to reject this bulk update request?"} %>
          <% end %>
          <% if CurrentUser.is_admin? && request.is_pending? %>
            | <%= link_to "Approve", approve_bulk_update_request_path(request), :remote => true, :method => :post %>
          <% end %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>